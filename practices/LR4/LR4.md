# –õ–ê–ë–û–†–ê–¢–û–†–ù–ê–Ø –†–ê–ë–û–¢–ê ‚Ññ4. –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–µ —Ç–µ–∫—Å—Ç—É—Ä—ã –∏ —à—É–º—ã
üîù [–í—Å–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã](../../README.md)  
üîô [–†–∏—Å–æ–≤–∞–Ω–∏–µ —Ñ–∏–≥—É—Ä: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ –∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤](../LR3/LR3.md)  
üîú –í–≤–µ–¥–µ–Ω–∏–µ –≤ 3D: Raymarching –∏ SDF
***

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

üîç [–¢–µ–æ—Ä–∏—è](#–¢–µ–æ—Ä–∏—è)  
üí° [–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏](#–ü–æ–ª–µ–∑–Ω—ã–µ-—Å—Å—ã–ª–∫–∏)  
‚öîÔ∏è [–£—á–µ–±–Ω–∞—è –∑–∞–¥–∞—á–∞](#–£—á–µ–±–Ω–∞—è-–∑–∞–¥–∞—á–∞)  
üìã [–ó–∞–¥–∞–Ω–∏—è](#–ó–∞–¥–∞–Ω–∏—è)  
üö© [–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)

*** 

## –¢–µ–æ—Ä–∏—è

**–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–µ —Ç–µ–∫—Å—Ç—É—Ä—ã** ‚Äî —ç—Ç–æ —Ç–µ–∫—Å—Ç—É—Ä—ã, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º –ø—É—Ç–µ–º —Å –ø–æ–º–æ—â—å—é –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –ò—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –º–∞–ª—ã–π –æ–±—ä–µ–º –∫–æ–¥–∞, –±–µ—Å—à–æ–≤–Ω–æ—Å—Ç—å, –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è.

**–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**
* –®–∞—Ö–º–∞—Ç–Ω–∞—è –¥–æ—Å–∫–∞

* –ü–æ–ª–æ—Å—ã

* –ö—Ä—É–≥–∏, —Ç–æ—á–∫–∏

* –†–µ—à–µ—Ç–∫–∏


**–°–ª—É—á–∞–π–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (—à—É–º—ã):**
* –®—É–º –ü–µ—Ä–ª–∏–Ω–∞ (Perlin Noise)
 
* –®—É–º –°–∏–º–ª–µ–∫—Å–∞ (Simplex Noise)

* –ö–ª–µ—Ç–æ—á–Ω—ã–π —à—É–º (Worley Noise)

* –§—Ä–∞–∫—Ç–∞–ª—å–Ω—ã–π —à—É–º


**–®—É–º (Noise)** ‚Äî —ç—Ç–æ –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –æ–±–ª–∞–¥–∞—é—â–∞—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ (–ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å, –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å, –≥–ª–∞–¥–∫–æ—Å—Ç—å, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ø–µ–∫—Ç—Ä). –Ø–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º "—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º –±–ª–æ–∫–æ–º" –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã—Ö —Ç–µ–∫—Å—Ç—É—Ä.

* **–ö–ª–µ—Ç–æ—á–Ω—ã–π —à—É–º (Value Noise):** –°–æ–∑–¥–∞–µ—Ç—Å—è –ø—É—Ç–µ–º –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–æ–±—ã—á–Ω–æ –≤ —É–∑–ª–∞—Ö —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏).

1. –ó–∞–¥–∞–µ—Ç—Å—è —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–∞—è —Å–µ—Ç–∫–∞. –ö–∞–∂–¥–æ–º—É —É–∑–ª—É `(i, j)` –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏).

2. –î–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π —Ç–æ—á–∫–∏ `(x, y)` –Ω–∞—Ö–æ–¥—è—Ç—Å—è 4 –æ–∫—Ä—É–∂–∞—é—â–∏—Ö –µ–µ —É–∑–ª–∞ —Å–µ—Ç–∫–∏.

3. –ó–Ω–∞—á–µ–Ω–∏—è –≤ —ç—Ç–∏—Ö —É–∑–ª–∞—Ö –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É—é—Ç—Å—è (—Å–Ω–∞—á–∞–ª–∞ –ø–æ X, –∑–∞—Ç–µ–º –ø–æ Y) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≥–ª–∞–¥–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `smoothstep` –∏–ª–∏ –ø–æ–ª–∏–Ω–æ–º–∞ –≠—Ä–º–∏—Ç–∞ `t*t*(3.0-2.0*t)`).


* **Gradient Noise (—à—É–º –ü–µ—Ä–ª–∏–Ω–∞)**: –£—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è, –≥–¥–µ –≤ —É–∑–ª–∞—Ö —Å–µ—Ç–∫–∏ –∑–∞–¥–∞—é—Ç—Å—è –Ω–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã (–≤–µ–∫—Ç–æ—Ä—ã). –ó–Ω–∞—á–µ–Ω–∏–µ –≤ —Ç–æ—á–∫–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–∫–∞–ª—è—Ä–Ω—ã–º –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –∏ –≤–µ–∫—Ç–æ—Ä–æ–º —Å–º–µ—â–µ–Ω–∏—è –æ—Ç —É–∑–ª–∞ –¥–æ —Ç–æ—á–∫–∏. –î–∞–µ—Ç –±–æ–ª–µ–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π, –Ω–µ "–±–ª–æ—á–Ω—ã–π" –≤–∏–¥.

* **–§—Ä–∞–∫—Ç–∞–ª—å–Ω—ã–π —à—É–º (Fractal Brownian Motion - fBm)**: –¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö, –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —à—É–º–æ–≤ –ø—É—Ç–µ–º —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–∫—Ç–∞–≤ –ø—Ä–æ—Å—Ç–æ–≥–æ —à—É–º–∞.  
`fBm(p) = noise(p) + 0.5 * noise(2*p) + 0.25 * noise(4*p) + ...`  
–ö–∞–∂–¥–∞—è –ø–æ—Å–ª–µ–¥—É—é—â–∞—è –æ–∫—Ç–∞–≤–∞ –∏–º–µ–µ—Ç —É–¥–≤–æ–µ–Ω–Ω—É—é —á–∞—Å—Ç–æ—Ç—É (–≤–¥–≤–æ–µ –º–µ–Ω—å—à—É—é –∞–º–ø–ª–∏—Ç—É–¥—É).


## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

1. [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç OpenGL](https://www.opengl.org/)
2. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ShaderToy](https://www.shadertoy.com/howto)
3. [–°—Ç–∞—Ä–µ–Ω—å–∫–∞—è, –Ω–æ –≤–ø–æ–ª–Ω–µ –ø–æ–ª–µ–∑–Ω–∞—è —Å—Ç–∞—Ç—å—è –Ω–∞ —Ö–∞–±—Ä–µ –ø–æ —à–µ–π–¥–µ—Ä–∞–º –Ω–∞ ShaderToy](https://habr.com/ru/articles/333002/)

## –£—á–µ–±–Ω–∞—è –∑–∞–¥–∞—á–∞


### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

–ù–∞—á–Ω—ë–º —Å —à–∞—Ö–º–∞—Ç–Ω–æ–π –¥–æ—Å–∫–∏:
```c++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    vec2 uv = fragCoord / iResolution.xy;
    uv *= 10.0; // –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª–µ—Ç–æ–∫
    
    // –°–æ–∑–¥–∞–µ–º —à–∞—Ö–º–∞—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω
    float chessboard = mod(floor(uv.x) + floor(uv.y), 2.0);
    vec3 color = vec3(chessboard);
    
    fragColor = vec4(color, 1.0);
}
```
![1](./images/1.png)

> 10 –∫–ª–µ—Ç–æ–∫ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –∏ 10 - –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏.

–ö–∞–∫ —ç—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å?

**–í–æ-–ø–µ—Ä–≤—ã—Ö,** –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (`uv = fragCoord / iResolution.xy;`) –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–∏–∫—Å–µ–ª–µ–π –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `[0; 1]`.  

**–í–æ-–≤—Ç–æ—Ä—ã—Ö,** —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω –≤ 10 —Ä–∞–∑ (`uv *= 10.0;`) –∏ —Ç–µ–ø–µ—Ä—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `[0; 10]`. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –º—ã —Å–æ–∑–¥–∞–¥–∏–º 10√ó10 = 100 –∫–ª–µ—Ç–æ–∫ –Ω–∞ –≤—Å–µ–π –¥–æ—Å–∫–µ.

**–í-—Ç—Ä–µ—Ç—å–∏—Ö,** —Å–∞–º —à–∞—Ö–º–∞—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω `mod(floor(uv.x) + floor(uv.y), 2.0);`, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ñ—É–Ω–∫—Ü–∏—è `floor` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–µ–ª—É—é —á–∞—Å—Ç—å —á–∏—Å–ª–∞, –∞ `mod` - —ç—Ç–æ –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è.


–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ `uv = (1.2, 2.7)`:
* `floor(uv.x) = floor(1.2) = 1`
* `floor(uv.y) = floor(2.7) = 2`
* `1 + 2 = 3`

* `mod(3, 2.0) = 1 ‚Üí –±–µ–ª–∞—è –∫–ª–µ—Ç–∫–∞`

–ê –µ—Å–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, `uv = (1.2, 3.7)`:
* `floor(uv.x) = 1`
* `floor(uv.y) = 3`
* `1 + 3 = 4`

* `mod(4, 2.0) = 0 ‚Üí —á–µ—Ä–Ω–∞—è –∫–ª–µ—Ç–∫–∞`


–¢.–µ. **`floor`** –¥–∞—ë—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–µ—Ç–∫–∏, –∞ **–æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –¥–≤–∞** –¥–∞—ë—Ç —à–∞—Ö–º–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫: 

* –ö–æ–≥–¥–∞ —Å—É–º–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç **—á–µ—Ç–Ω–∞—è** ‚Üí `mod(..., 2.0) = 0` ‚Üí —á–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç
* –ö–æ–≥–¥–∞ —Å—É–º–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç **–Ω–µ—á–µ—Ç–Ω–∞—è** ‚Üí `mod(..., 2.0) = 1` ‚Üí –±–µ–ª—ã–π —Ü–≤–µ—Ç

**–ù–æ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –Ω–µ –∫–≤–∞–¥—Ä–∞—Ç—ã, –∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏** ü§î 

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–∏ —Å—Ç–æ—Ä–æ–Ω. –ù—É–∂–Ω–æ —ç—Ç–æ —É—á–µ—Å—Ç—å:
```C++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    vec2 uv = fragCoord / iResolution.xy;
    uv.x *= iResolution.x / iResolution.y;
    uv *= 10.0; // –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª–µ—Ç–æ–∫
    
    // –°–æ–∑–¥–∞–µ–º —à–∞—Ö–º–∞—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω
    float chessboard = mod(floor(uv.x) + floor(uv.y), 2.0);
    vec3 color = vec3(chessboard);
    
    fragColor = vec4(color, 1.0);
}
```
![2](./images/2.png)

> –ò –ø–æ–ª—É—á–∞—é—Ç—Å—è **—á–µ—Å—Ç–Ω—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã**. –¢–æ–ª—å–∫–æ –º–µ–Ω—è–µ—Ç—Å—è –∏—Ö **–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ**. **–ü–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏** –∏—Ö –≤—Å—ë —Ç–∞–∫–∂–µ **10**, –∞ –≤–æ—Ç **–ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏** - —É–∂–µ **–±–æ–ª—å—à–µ**.

–ë–µ–ª–æ-—á–µ—Ä–Ω–∞—è –∫–ª–µ—Ç–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ —Ü–≤–µ—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ª–∏–±–æ —Ç–æ–ª—å–∫–æ –∏–∑ –Ω—É–ª–µ–π (—ç—Ç–æ —á–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç), –ª–∏–±–æ —Ç–æ–ª—å–∫–æ –∏–∑ –µ–¥–∏–Ω–∏—Ü (—ç—Ç–æ –±–µ–ª—ã–π —Ü–≤–µ—Ç).

**–ê –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ü–≤–µ—Ç–Ω—É—é —à–∞—Ö–º–∞—Ç–Ω—É—é –¥–æ—Å–∫—É?**

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–≤–∞ —Ü–≤–µ—Ç–∞ –∏ —Å–º–µ—à–∏–≤–∞—Ç—å –∏—Ö –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `chessboard`:
```C++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    vec2 uv = fragCoord / min(iResolution.x, iResolution.y);
    uv *= 10.0;
    
    float chessboard = mod(floor(uv.x) + floor(uv.y), 2.0);
    
    // –¶–≤–µ—Ç–∞ –≤–º–µ—Å—Ç–æ —á–µ—Ä–Ω–æ–≥–æ/–±–µ–ª–æ–≥–æ
    vec3 color1 = vec3(0.408, 0.31, 0.494); 
    vec3 color2 = vec3(0.992, 0.698, 0.624);
    
    vec3 color = mix(color1, color2, chessboard);
    
    fragColor = vec4(color, 1.0);
}
```
![3](./images/3.png)

> –¢–∞–∫ –∫–∞–∫ `chessboard` –ª–∏–±–æ **0**, –ª–∏–±–æ **1**, —Ç–æ –∏ —Ü–≤–µ—Ç–∞, –ø–æ –±–æ–ª—å—à–æ–º—É —Å—á—ë—Ç—É, –Ω–µ —Å–º–µ—à–∏–≤–∞—é—Ç—Å—è, –∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–±–∏—Ä–∞—é—Ç—Å—è. –ï—Å–ª–∏ **0**, —Ç–æ **–ø–µ—Ä–≤—ã–π —Ü–≤–µ—Ç**, –µ—Å–ª–∏ **1**, —Ç–æ **–≤—Ç–æ—Ä–æ–π —Ü–≤–µ—Ç**.

–ê –≤–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç —Å –æ–±–≤–æ–¥–∫–æ–π –∫–∞–∂–¥–æ–π –∫–ª–µ—Ç–∫–∏:
```c++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    vec2 uv = fragCoord / min(iResolution.x, iResolution.y);
    uv *= 10.0;
    
    vec2 cellUV = fract(uv);
    
    // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ/–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–µ–±—Ä–∞
    float distToEdge = min(
        min(cellUV.x, 1.0 - cellUV.x), // —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü
        min(cellUV.y, 1.0 - cellUV.y)  // —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü
    );
    
    // –ü–ª–∞–≤–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã
    float border = 0.05;
    float cells = 1.0 - smoothstep(0.0, border, distToEdge);
    
    
    float pattern = mod(floor(uv.x) + floor(uv.y), 2.0);
    
    // –¶–≤–µ—Ç–∞
    vec3 color1 = vec3(0.078, 0.278, 0.118);
    vec3 color2 = vec3(0.855, 0.416, 0.0); 
    
    vec3 color = mix(color1, color2, pattern);
    color = mix(color, vec3(0.1), cells); // –î–æ–±–∞–≤–ª—è–µ–º —á–µ—Ä–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã
    
    fragColor = vec4(color, 1.0);
}
```
![4](./images/4.png)

> –§—É–Ω–∫—Ü–∏—è `fract` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—Ä–æ–±–Ω—É—é —á–∞—Å—Ç—å —á–∏—Å–ª–∞, –∞ —Ñ—É–Ω–∫—Ü–∏—è `smoothstep` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≥–ª–∞–¥–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã.

–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—á–µ—Å–∫–∏–µ –∫—Ä—É–≥–∏:
```c++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    vec2 uv = (2.0 * fragCoord - iResolution.xy) / iResolution.y;
    
    // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—á–µ—Å–∫–∏–µ –∫—Ä—É–≥–∏
    float dist = length(uv);
    float circles = sin(dist * 20.0); // –ß–∞—Å—Ç–æ—Ç–∞ –∫—Ä—É–≥–æ–≤
    
    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–µ—Ç–∫–∏–µ –ø–æ–ª–æ—Å—ã
    circles = step(0.0, circles);
    vec3 color = vec3(circles);
    
    fragColor = vec4(color, 1.0);
}
```
![7](./images/7.png)
> —Ñ—É–Ω–∫—Ü–∏—è `step` —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∞ **—Ñ—É–Ω–∫—Ü–∏—è-"–ø–µ–µ—Ä–∫–ª—é—á–∞—Ç–µ–ª—å"**. –û–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: "**X –º–µ–Ω—å—à–µ –ø–æ—Ä–æ–≥–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è?**" –ï—Å–ª–∏ –¥–∞ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **0**, –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **1**.

–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª–æ—Å—ã:
```c++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    vec2 uv = fragCoord / iResolution.xy;
    
    // –°–æ–∑–¥–∞–µ–º –¥–≤–∏–∂—É—â–∏–µ—Å—è –ø–æ–ª–æ—Å—ã
    float stripes = sin(uv.x * 30.0 + iTime * 3.0);
    stripes = smoothstep(-0.3, 0.3, stripes); // –ü–ª–∞–≤–Ω—ã–µ –∫—Ä–∞—è
    
    vec3 color = vec3(stripes * 0.8, stripes * 0.5, stripes);
    
    fragColor = vec4(color, 1.0);
}
```

![capture](images/capture.gif)

### –®—É–º—ã

–î–ª—è –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —à—É–º–æ–≤ –Ω—É–∂–µ–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Å–µ–≤–¥–æ-—Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª. –í Shadertoy –Ω–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ, –ø–æ—ç—Ç–æ–º—É —Å–∞–º–∏ –Ω–∞–ø–∏—à–µ–º —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é:
```c++
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [0, 1)
// –ü—Ä–∏–Ω–∏–º–∞–µ—Ç 2D-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "—Å–ª—É—á–∞–π–Ω–æ–µ" float –∑–Ω–∞—á–µ–Ω–∏–µ.
float rand(vec2 uv) {
    return fract(sin(dot(uv.xy, vec2(12.9898, 78.233))) * 43758.5453123);
}

void mainImage(out vec4 fragColor, in vec2 fragCoord)
{
    // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–∏–∫—Å–µ–ª—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω [0, 1]
    vec2 uv = fragCoord / iResolution.xy;
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ (uv)
    float noise = rand(uv);
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Ü–≤–µ—Ç–∞ (–æ—Ç—Ç–µ–Ω–∫–∏ —Å–µ—Ä–æ–≥–æ)
    fragColor = vec4(noise, noise, noise, 1.0);
}
```
![5](./images/5.png)


**–í–æ-–ø–µ—Ä–≤—ã—Ö,** –≤ Shadertoy –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ–º–µ—â–∞—Ç—å –∏—Ö –Ω—É–∂–Ω–æ –¥–æ —Ñ—É–Ω–∫—Ü–∏–∏ `main`.

–§—É–Ω–∫—Ü–∏—è `rand(vec2 uv)` - —ç—Ç–æ —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `sin`, `dot`(—Å–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤) –∏ —É–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ö–∞–æ—Å–∞. –ê `fract` –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –¥—Ä–æ–±–Ω—É—é —á–∞—Å—Ç—å, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç 0 –¥–æ 1.

**–í–æ-–≤—Ç–æ—Ä—ã—Ö,** —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `rand` –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –≤—Å–µ–º —Ü–≤–µ—Ç–æ–≤—ã–º –∫–∞–Ω–∞–ª–∞–º (R, G, B), —á—Ç–æ –¥–∞–µ—Ç –Ω–∞–º –æ—Ç—Ç–µ–Ω–∫–∏ —Å–µ—Ä–æ–≥–æ.

> –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `rand` (—á–∏—Å–ª–∞ 12.9898, 78.233). –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω —à—É–º–∞. –î–æ–±–∞–≤—å—Ç–µ –≤—Ä–µ–º—è (`iTime`) –∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º `uv` –≤–Ω—É—Ç—Ä–∏ –≤—ã–∑–æ–≤–∞ `rand(uv)` –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–Ω–µ –∑–∞–±—É–¥—å—Ç–µ –Ω–∞–∂–∞—Ç—å –Ω–∞ `play`)


–ö–ª–µ—Ç–æ—á–Ω—ã–π —à—É–º:
```c++
float rand(vec2 uv) {
    return fract(sin(dot(uv.xy, vec2(12.9898, 78.233))) * 43758.5453123);
}

void mainImage(out vec4 fragColor, in vec2 fragCoord)
{
    vec2 uv = fragCoord / iResolution.xy;
    
    // –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º UV-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã. –£–≤–µ–ª–∏—á–∏–≤–∞—è —á–∏—Å–ª–æ, –º—ã —É–º–µ–Ω—å—à–∞–µ–º "—è—á–µ–π–∫–∏" —à—É–º–∞.
    float scale = 5.0;
    uv *= scale;
    
    // –ù–∞—Ö–æ–¥–∏–º —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —è—á–µ–π–∫–∏ –∏ –¥—Ä–æ–±–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–Ω—É—Ç—Ä–∏ –Ω–µ–µ
    vec2 cell = floor(uv);
    vec2 insideCell = fract(uv);
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —á–µ—Ç—ã—Ä–µ—Ö —É–≥–ª–æ–≤ —Ç–µ–∫—É—â–µ–π —è—á–µ–π–∫–∏
    float bottomLeft = rand(cell);
    float bottomRight = rand(cell + vec2(1.0, 0.0));
    float topLeft = rand(cell + vec2(0.0, 1.0));
    float topRight = rand(cell + vec2(1.0, 1.0));
    
    // –ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ–º –º–µ–∂–¥—É —É–≥–ª–∞–º–∏. –°–Ω–∞—á–∞–ª–∞ –ø–æ –æ—Å–∏ X, –∑–∞—Ç–µ–º –ø–æ Y.
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º smoothstep –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞.
    vec2 smoothCoord = smoothstep(0.0, 1.0, insideCell);
    
    float bottomMix = mix(bottomLeft, bottomRight, smoothCoord.x);
    float topMix = mix(topLeft, topRight, smoothCoord.x);
    float finalNoise = mix(bottomMix, topMix, smoothCoord.y);
    
    fragColor = vec4(finalNoise, finalNoise, finalNoise, 1.0);
}
```
![6](./images/6.png)

**–ö–ª–µ—Ç–æ—á–Ω—ã–π —à—É–º (Value Noise)** —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤:
1. **–î–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏—è:** –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ç–∫—É (—Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã).

2. **–°–ª—É—á–∞–π–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:** –í –∫–∞–∂–¥–æ–π –≤–µ—Ä—à–∏–Ω–µ (—É–∑–ª–µ) —ç—Ç–æ–π —Å–µ—Ç–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ (—Å –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ rand).

3. **–ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è:** –î–ª—è —Ç–æ—á–∫–∏ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –º—ã –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ—Å–µ–¥–Ω–∏—Ö —É–∑–ª–æ–≤. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–ª–∞–≤–Ω—É—é –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, smoothstep), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ä–µ–∑–∫–∏—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.

## –ó–∞–¥–∞–Ω–∏—è

### –ó–∞–¥–∞–Ω–∏–µ 1. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

–ù–∞—Ä–∏—Å—É–π—Ç–µ —Ü–≤–µ—Ç–Ω—É—é —à–∞—Ö–º–∞—Ç–Ω—É—é –¥–æ—Å–∫—É.

### –ó–∞–¥–∞–Ω–∏–µ 2. –®—É–º

–†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —à—É–º–∞.






## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

1. –ü–æ—á–µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã `fragCoord`?

3. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è `fract()`?

5. –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.

7. –ö–∞–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏ –º–æ–∂–Ω–æ –∞–Ω–∏–º–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–µ —Ç–µ–∫—Å—Ç—É—Ä—ã?

9. –ß—Ç–æ —Ç–∞–∫–æ–µ SDF –∏ –∫–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –¥–∞–µ—Ç?
