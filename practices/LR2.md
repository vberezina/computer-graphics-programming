# –õ–ê–ë–û–†–ê–¢–û–†–ù–ê–Ø –†–ê–ë–û–¢–ê ‚Ññ2. –ì–µ–æ–º–µ—Ç—Ä–∏—è —ç–∫—Ä–∞–Ω–∞: –°–∏—Å—Ç–µ–º—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –ª–∏–Ω–∏–∏ –∏ —Å–µ—Ç–∫–∏
üîù [–í—Å–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã](../../README.md)  
üîô [–û—Å–Ω–æ–≤—ã ShaderToy: –û—Ç –ø–∏–∫—Å–µ–ª—è –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é](../LR1/LR1.md)  
üîú –†–∏—Å–æ–≤–∞–Ω–∏–µ —Ñ–∏–≥—É—Ä: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ –∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤
***

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

üîç [–¢–µ–æ—Ä–∏—è](#–¢–µ–æ—Ä–∏—è)  
üí° [–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏](#–ü–æ–ª–µ–∑–Ω—ã–µ-—Å—Å—ã–ª–∫–∏)  
‚öîÔ∏è [–£—á–µ–±–Ω–∞—è –∑–∞–¥–∞—á–∞](#–£—á–µ–±–Ω–∞—è-–∑–∞–¥–∞—á–∞)  
üìã [–ó–∞–¥–∞–Ω–∏—è](#–ó–∞–¥–∞–Ω–∏—è)  
üö© [–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)

*** 

## –¢–µ–æ—Ä–∏—è

**Rasterization (—Ä–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è)** - –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ (–ª–∏–Ω–∏–π, –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤) –≤ —Ä–∞—Å—Ç—Ä–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —Å–æ—Å—Ç–æ—è—â–µ–µ –∏–∑ –ø–∏–∫—Å–µ–ª–µ–π.

**–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª–æ–∂–µ–Ω–∏—è —Ç–æ—á–µ–∫ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ —Å –ø–æ–º–æ—â—å—é —á–∏—Å–µ–ª (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç). –í –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –∫–∞–∂–¥–∞—è —Å–æ —Å–≤–æ–µ–π –æ–±–ª–∞—Å—Ç—å—é –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.

##### –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

1. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (Object Space)**  

    * *–ù–∞—á–∞–ª–æ:* –¶–µ–Ω—Ç—Ä –æ–±—ä–µ–∫—Ç–∞

    * *–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:* –û–ø–∏—Å–∞–Ω–∏–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –æ–±—ä–µ–∫—Ç–∞

    * *–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:* –ù–µ–∑–∞–≤–∏—Å–∏–º–∞ –æ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –≤ —Å—Ü–µ–Ω–µ

    * *–ü—Ä–∏–º–µ—Ä:* –í–µ—Ä—à–∏–Ω—ã 3D-–º–æ–¥–µ–ª–∏ –≤ —Ñ–∞–π–ª–µ

1. **–ú–∏—Ä–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (World Space)**
    * *–ù–∞—á–∞–ª–æ:* –û–±—â–∞—è —Ç–æ—á–∫–∞ –º–∏—Ä–∞

    * *–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ —Å—Ü–µ–Ω–µ

    * *–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:* –ú–∞—Ç—Ä–∏—Ü–∞ –º–æ–¥–µ–ª–∏ (Model Matrix)

1. **–°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∫–∞–º–µ—Ä—ã (View Space)**
    * *–ù–∞—á–∞–ª–æ:* –ü–æ–∑–∏—Ü–∏—è –∫–∞–º–µ—Ä—ã

    * *–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:* –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–∞–º–µ—Ä—ã

    * *–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:* –ú–∞—Ç—Ä–∏—Ü–∞ –≤–∏–¥–∞ (View Matrix)

1. **–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–µ—á–µ–Ω–∏—è (Clip Space)**
    * *–î–∏–∞–ø–∞–∑–æ–Ω:* [-1, 1] –ø–æ –≤—Å–µ–º –æ—Å—è–º

    * *–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:* –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏

    * *–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:* –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ü–∏–∏ (Projection Matrix)

1. **–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (NDC)**
    * *–î–∏–∞–ø–∞–∑–æ–Ω:* [-1, 1] –∏–ª–∏ [0, 1]

    * *–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:* –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

1. **–≠–∫—Ä–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (Screen Space)**  
    * *–ù–∞—á–∞–ª–æ:* –ó–∞–≤–∏—Å–∏—Ç –æ—Ç API (–ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π/–Ω–∏–∂–Ω–∏–π —É–≥–æ–ª)

    * *–ï–¥–∏–Ω–∏—Ü—ã:* –ü–∏–∫—Å–µ–ª–∏

    * *–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:* –§–∏–Ω–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

1. [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç OpenGL](https://www.opengl.org/)
2. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ShaderToy](https://www.shadertoy.com/howto)
3. [–°—Ç–∞—Ä–µ–Ω—å–∫–∞—è, –Ω–æ –≤–ø–æ–ª–Ω–µ –ø–æ–ª–µ–∑–Ω–∞—è —Å—Ç–∞—Ç—å—è –Ω–∞ —Ö–∞–±—Ä–µ –ø–æ —à–µ–π–¥–µ—Ä–∞–º –Ω–∞ ShaderToy](https://habr.com/ru/articles/333002/)

## –£—á–µ–±–Ω–∞—è –∑–∞–¥–∞—á–∞

–ù–∞—á–Ω–µ–º —Å —Ç–æ–≥–æ, —á—Ç–æ –ø–æ–ø—Ä–æ–±—É–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç—å —ç–∫—Ä–∞–Ω –Ω–∞ –¥–≤–∞ —Ü–≤–µ—Ç–∞. –£ –Ω–∞—Å –µ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä `fragCoord`, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–∏–∫—Å–µ–ª—è (`x` –∏ `y`).
> –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫: —Å–º–æ—Ç—Ä–µ—Ç—å —á–µ–º—É —Ä–∞–≤–Ω–∞ `x`-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –ø–∏–∫—Å–µ–ª—è, –∏ –µ—Å–ª–∏ –æ–Ω–∞ –º–µ–Ω—å—à–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä `100`, —Ç–æ –∑–∞–¥–∞–≤–∞—Ç—å –ø–∏–∫—Å–µ–ª—é –æ–¥–∏–Ω —Ü–≤–µ—Ç, –∞ –≤–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö - –∑–∞–¥–∞–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ü–≤–µ—Ç.  
```C++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    vec3 color1 = vec3(1,0,0);
    vec3 color2 = vec3(1,1,0);
    
    vec3 pixelColor;
    
    float widthOfStrip = 100;
    
    if (fragCoord.x < widthOfStrip) 
    {
        pixelColor = color1;
    }
    else
    {
        pixelColor = color2;
    }
    fragColor = vec4(pixelColor, 1.0);
    
}
```
![1](LR2/images/1.png)

–ê –∫–∞–∫ –ø–æ–¥–µ–ª–∏—Ç—å —ç–∫—Ä–∞–Ω —Ä–æ–≤–Ω–æ –ø–æ–ø–æ–ª–∞–º?

> –í–æ-–ø–µ—Ä–≤—ã—Ö, —É –Ω–∞—Å –µ—Å—Ç—å **uniform**-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –≠—Ç–æ —Ç–∞–∫–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä—ã—Ö —è–≤–ª—è–µ—Ç—Å—è **–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞**. 

–í–≤–µ—Ä—Ö—É –Ω–∞–¥ –æ–∫–Ω–æ–º –∫–æ–¥–∞ –µ—Å—Ç—å `Shader Inputs` –∏ —Ç–∞–º –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ `uniform`-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

![2](LR2/images/2.png) 

> –°–µ–π—á–∞—Å –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç `iResolution`. –≠—Ç–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤—å—é–ø–æ—Ä—Ç–∞. –ï–≥–æ –∫—Å—Ç–∞—Ç–∏ –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å —Ä—è–¥–æ–º —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–∞–¥—Ä–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É ( –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –≤—ã—à–µ `715x413`).  
*–ï—Å–ª–∏ –≤–∞–º –≤–¥—Ä—É–≥ –≤ –≥–æ–ª–æ–≤—É –ø—Ä–∏–¥—ë—Ç –º—ã—Å–ª—å –ø–æ—Ä–∞—Å—Ç—è–≥–∏–≤–∞—Ç—å –æ–∫–Ω–æ –±—Ä–∞—É–∑–µ—Ä–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ—Ç–∫—Ä—ã—Ç ShaderToy, —Ç–æ —ç—Ç–∏ —Ü–∏—Ñ—Ä—ã –±—É–¥—É—Ç –º–µ–Ω—è—Ç—å—Å—è.*

–õ–æ–≥–∏—á–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ –µ—Å–ª–∏ –≤–∑—è—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ `x`) –∏ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 2, —Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª–æ–≤–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞
```C++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    vec3 color1 = vec3(1,0,0);
    vec3 color2 = vec3(1,1,0);
    
    vec3 pixelColor;
    
    float widthOfStrip = iResolution.x / 2.0;
    
    if (fragCoord.x < widthOfStrip) 
    {
        pixelColor = color1;
    }
    else
    {
        pixelColor = color2;
    }
    fragColor = vec4(pixelColor, 1.0);
    
}
```
![3](LR2/images/3.png)

–ò —Ç–æ–≥–¥–∞ –∫–∞–∫–æ–≥–æ –±—ã —Ä–∞–∑–º–µ—Ä–∞ –Ω–µ –±—ã–ª —ç–∫—Ä–∞–Ω, –æ–Ω –±—É–¥–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω —Ä–æ–≤–Ω–æ –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏.

> –ê —á—Ç–æ –µ—Å–ª–∏ –º—ã –Ω–µ —Ö–æ—Ç–∏–º –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–º–∏ –∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—é? –û–Ω–æ –∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–µ.  
–í–æ—Ç –∑–¥–µ—Å—å –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Ç–∞–∫–æ–µ –ø–æ–Ω—è—Ç–∏–µ –∫–∞–∫ **–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**. 

–ü—Ä–∏ *–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏* –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–∏–∫—Å–µ–ª–µ–π –≤—å—é–ø–æ—Ä—Ç–∞ –ª—é–±–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ª–æ–∂–∞—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω `[0.0;1.0]`.
> –í —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –±–µ–∑ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏:  
–ª–µ–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª: [`0.0`; `0.0`]   
–ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª: [`0.0`; `iResolution.y`]  
–ø—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª: [`iResolution.x`; `0.0`]  
–ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª: [`iResolution.x`; `iResolution.y`]

![4](LR2/images/4.png)

–¢–∞–∫ –∫–∞–∫ –∂–µ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å? 

> –ù—É–∂–Ω–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞–∂–¥–æ–≥–æ –ø–∏–∫—Å–µ–ª—è –ø–æ–¥–µ–ª–∏—Ç—å –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ.  
`fragCoord.xy / iResolution.xy;`

```C++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    //–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
    vec2 uv = fragCoord.xy / iResolution.xy;
    
    vec3 color1 = vec3(1,0,0);
    vec3 color2 = vec3(1,1,0);
    
    vec3 pixelColor;
    
    float widthOfStrip = 0.5;
    
    // —Ç–µ—Ä–Ω–∞—Ä–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä. –ü–æ —Å—É—Ç–∏, —ç—Ç–æ –æ–±—ã—á–Ω–æ–µ if...else —Å –æ–¥–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π, 
    // —Ç–æ–ª—å–∫–æ –∫–æ—Ä–æ—á–µ
    pixelColor = (uv.x > widthOfStrip) ? color1 : color2;
    
    fragColor = vec4(pixelColor, 1.0);
    
}
```
![5](./LR2/images/5.png)

–ê –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å 3 –ø–æ–ª–æ—Å—ã?
> –ï—Å–ª–∏ –º—ã –≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ 3 –ø–æ–ª–æ—Å—ã –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —à–∏—Ä–∏–Ω—ã, —Ç–æ –º–æ–∂–Ω–æ –¥–∏–∞–ø–∞–∑–æ–Ω [0.0;1.0] —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 3 –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫—É–¥–∞ –ø–æ–ø–∞–ª –ø–∏–∫—Å–µ–ª—å

```C++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    //–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
    vec2 uv = fragCoord.xy / iResolution.xy;
    
    // –º–∞—Å—Å–∏–≤ —Ü–≤–µ—Ç–æ–≤
    vec3 colors[3]; 
    colors[0] = vec3(0.247,0.388,0.345);
    colors[1] = vec3(0.541,0.6,0.580);
    colors[2] = vec3(0.91,0.694,0.0);
    
    vec3 pixelColor;
    
    float widthOfStrip = 0.333;
    
    if (uv.x < widthOfStrip)
    {
        pixelColor = colors[1];
    }
    else if (uv.x < widthOfStrip * 2.0)
    {
        pixelColor = colors[2];
    }
    else
    {
        pixelColor = colors[0];
    }

    fragColor = vec4(pixelColor, 1.0);
}
```
![6](./LR2/images/6.png)

–ê –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª–æ—Å—ã?

> –ù—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É `x` –ø–æ–º–µ–Ω—è—Ç—å –Ω–∞ `y`.  
`uv.y < widthOfStrip` –∏ `uv.y < widthOfStrip * 2.0`

![7](./LR2/images/7.png)

–ê –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å 4 –ø–æ–ª–æ—Å—ã? –ê 5? 

> –ú–æ–∂–Ω–æ, –∫–æ–Ω–µ—á–Ω–æ, –¥–æ–±–∞–≤–ª—è—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ `if..else`, –Ω–æ –µ—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ.

``` C++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    //–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
    vec2 uv = fragCoord.xy / iResolution.xy;
    
    // –î–µ–ª–∏–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø–æ X –Ω–∞ 3 —Å–µ–≥–º–µ–Ω—Ç–∞ –∏ –±–µ—Ä—ë–º —Ü–µ–ª—É—é —á–∞—Å—Ç—å –æ—Ç 0 –¥–æ 2
    int bandIndex = int(floor(uv.x * 3.0));
        
    // –º–∞—Å—Å–∏–≤ —Ü–≤–µ—Ç–æ–≤
    vec3 colors[3]; 
    colors[0] = vec3(0.247,0.388,0.345);
    colors[1] = vec3(0.541,0.6,0.580);
    colors[2] = vec3(0.91,0.694,0.0);
    
    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–±–∏—Ä–∞–µ–º —Ü–≤–µ—Ç. %3 –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∏–Ω–¥–µ–∫—Å –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç 0, 1 –∏–ª–∏ 2
    vec3 pixelColor = colors[bandIndex % 3];

    fragColor = vec4(pixelColor, 1.0);    
}
```
![8](./LR2/images/8.png)

–ö–∞–∫ —ç—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å? –î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–æ—Ç —ç—Ç—É —á–∞—Å—Ç—å:  
`int bandIndex = int(floor(uv.x * 3.0));`

`uv.x * 3.0` - –Ω–∞–ø–æ–º–Ω—é, —á—Ç–æ –¥–∏–∞–ø–∞–∑–æ–Ω –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç [ 0.0; 1.0 ]. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å 3 –ø–æ–ª–æ—Å—ã, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —ç—Ç–æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω –≤ 3 —Ä–∞–∑–∞.  
`floor(uv.x * 3.0)` - —Ñ—É–Ω–∫—Ü–∏—è `floor (x)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–Ω–∞–∏–±–æ–ª—å—à–µ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ `x`**.  
`int(floor(x))` - —Ö–æ—Ç—å `floor` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∏–±–æ–ª—å—à–µ–µ —Ü–µ–ª–æ–µ, —ç—Ç–æ —á–∏—Å–ª–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ç–∏–ø–∞ `float`

> –ù–∞–ø—Ä–∏–º–µ—Ä, `uv.x = 0.35`  
`uv.x * 3.0` = 0.35 * 3.0 = 1.05  
`floor(uv.x * 3.0)` = floor(1.05) = 1.0  
`int(floor(uv.x * 3.0))` = 1

–¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–æ—Ç —ç—Ç—É —á–∞—Å—Ç—å:  
`vec3 pixelColor = colors[bandIndex % 3];`

`bandIndex % 3` - –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ 3. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∏–Ω–¥–µ–∫—Å –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç **0**, **1** –∏–ª–∏ **2**. –ï—Å–ª–∏ `bandIndex` –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω, –Ω–∞–ø—Ä–∏–º–µ—Ä 3, —Ç–æ 3 % 3 = **0**, –µ—Å–ª–∏ –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω 4, —Ç–æ 4 % 3 = **1**, –∞ –µ—Å–ª–∏ 5, —Ç–æ 5 % 3 = **2**, –∞ –µ—Å–ª–∏ 6, —Ç–æ 6 % 3 = **0**. *–£–∂–µ —É–ª–∞–≤–ª–∏–≤–∞–µ—Ç–µ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç—å?..*

`colors[bandIndex % 3]` - –±–µ—Ä–µ–º —Ü–≤–µ—Ç –ø–æ –∏–Ω–¥–µ–∫—Å—É –∏–∑ –º–∞—Å—Å–∏–≤–∞.

–ê —Ç–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ—Ç –≤ —ç—Ç–æ–π —Å—Ç—Ä–æ—á–∫–µ `int bandIndex = int(floor(uv.x * 3.0));`  
`3.0` —É–≤–µ–ª–∏—á–∏—Ç—å, –Ω–µ –º–µ–Ω—è—è –±–æ–ª—å—à–µ –Ω–∏–≥–¥–µ –∫–æ–¥. –ü–æ—Å—Ç–∞–≤—å—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, 4. –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å? –ê –µ—Å–ª–∏ 5? –í–æ—Ç —á—Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è, –µ—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–æ—Ç —Ç–∞–∫–æ–π –∫–æ–¥:

``` C++
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    //–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
    vec2 uv = fragCoord.xy / iResolution.xy;
    
    int bandIndex = int(floor(uv.x * 9.0));
        
    // –º–∞—Å—Å–∏–≤ —Ü–≤–µ—Ç–æ–≤
    vec3 colors[3]; 
    colors[0] = vec3(0.247,0.388,0.345);
    colors[1] = vec3(0.541,0.6,0.580);
    colors[2] = vec3(0.91,0.694,0.0);
    
    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–±–∏—Ä–∞–µ–º —Ü–≤–µ—Ç. %3 –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∏–Ω–¥–µ–∫—Å –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç 0, 1 –∏–ª–∏ 2
    vec3 pixelColor = colors[bandIndex % 3];

    fragColor = vec4(pixelColor, 1.0);    
}
```
![9](./LR2/images/9.png)

–£ –Ω–∞—Å –ø–æ–ª—É—á–∏–ª—Å—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω! –ò —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–π –∫–æ–¥üòÑ .

–í–æ –≤—Å–µ—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –¥–æ —ç—Ç–æ–≥–æ –ø–æ–ª–æ—Å—ã –∑–∞–ø–æ–ª–Ω—è—é—Ç –≤–µ—Å—å —ç–∫—Ä–∞–Ω. –ê –∫–∞–∫ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å —Ç–æ–Ω–∫—É—é –ª–∏–Ω–∏—é –Ω–∞ –±–µ–ª–æ–º —Ñ–æ–Ω–µ? –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–æ—Ç —Ç–∞–∫—É—é:

![11](./LR2/images/11.png)

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–æ—Ç —Å —Ç–∞–∫–æ–π —Å—Ç–æ—Ä–æ–Ω—ã:

![10](./LR2/images/10.png)


–§–∏–æ–ª–µ—Ç–æ–≤–∞—è –ª–∏–Ω–∏—è - —ç—Ç–æ –æ—Å—å `X`. –¢.–∫. –º—ã –≤—Å–µ–≥–¥–∞ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–∏–∫—Å–µ–ª–µ–π, —Ç–æ `x` –±—É–¥–µ—Ç –ª–µ–∂–∞—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç `0.0` –¥–æ `1.0`.

> –ü—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –Ω–∞—á–∞–ª–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç `(0.0;0.0)` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ **–ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É**.   
*–í –¥–∞–ª—å–Ω–µ–π—à–µ–º –Ω–∞—á–∞–ª–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –º—ã —á–∞—Å—Ç–æ –±—É–¥–µ—Ç —Å–¥–≤–∏–≥–∞—Ç—å –≤ —Ü–µ–Ω—Ç—Ä —ç–∫—Ä–∞–Ω–∞, –Ω–æ –æ–± —ç—Ç–æ–º –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞—Ö*üòâ

–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—É `y` –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º—ã –±—É–¥–µ–º –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –ª–∏–Ω–∏—è —Å—Ç—Ä–æ–≥–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è.

–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É `x`. –í–æ-–ø–µ—Ä–≤—ã—Ö, —É –ª–∏–Ω–∏–∏ –µ—Å—Ç—å **—Ç–æ–ª—â–∏–Ω–∞** –∏ **–ø–æ–ª–æ–∂–µ–Ω–∏–µ**. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ:  
```C++
lineThickness = 0.01;
lineCoord = 0.3;
```

–¢.–µ., `x = 0.3`, —ç—Ç–æ –ø–µ—Ä–≤–∞—è —Å–ª–µ–≤–∞ —Ç—Ä–µ—Ç—å —ç–∫—Ä–∞–Ω–∞.

–¢–µ–ø–µ—Ä—å, —á—Ç–æ–±—ã –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –ª–∏–Ω–∏—é, –Ω—É–∂–Ω–æ *–≤—Å–µ –ø–∏–∫—Å–µ–ª–∏*, –∫–æ—Ç–æ—Ä—ã–µ **–Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —ç—Ç—É –ª–∏–Ω–∏—é** –∑–∞–∫—Ä–∞—Å–∏—Ç—å *—Ü–≤–µ—Ç–æ–º —Ñ–æ–Ω–∞*, –∞ —Ç–µ, —á—Ç–æ **–ø–æ–ø–∞–¥–∞—é—Ç** - *—Ü–≤–µ—Ç–æ–º –ª–∏–Ω–∏–∏*.  

–ê –≤–æ—Ç –∫–∞–∫ –ø–æ–Ω—è—Ç—å —á—Ç–æ –ø–∏–∫—Å–µ–ª—å –ø–æ–ø–∞–ª –≤ –ª–∏–Ω–∏—é?

1. –ú–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω `[0.3-0.01; 0.3+0.01]` –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –Ω–µ–≥–æ.
> –¢.–µ. ***–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –ò*** —Ç–æ–≥–æ, —á—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –ø–∏–∫—Å–µ–ª—è –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ `a (0.3-0.01)` –∏ –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ `b (0.3+0.01)`.

2. –ü–æ—Å—á–∏—Ç–∞—Ç—å **—Ä–∞–∑–Ω–∏—Ü—É** –º–µ–∂–¥—É *–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ–π –ø–∏–∫—Å–µ–ª—è* –∏ *–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ–π –ª–∏–Ω–∏–∏* –∏ –≤–∑—è—Ç—å –æ—Ç —ç—Ç–æ–≥–æ **–º–æ–¥—É–ª—å**, —Ç.–∫. –Ω–∞–º –Ω—É–∂–Ω–æ –∏–º–µ–Ω–Ω–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ. –ê –∑–∞—Ç–µ–º —Å—Ä–∞–≤–Ω–∏—Ç—å —ç—Ç–æ —Å —Ç–æ–ª—â–∏–Ω–æ–π –ª–∏–Ω–∏–∏ –∏ **–µ—Å–ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–Ω—å—à–µ —Ç–æ–ª—â–∏–Ω—ã –ª–∏–Ω–∏–∏, —Ç–æ –ø–∏–∫—Å–µ–ª—å –ø–æ–ø–∞–ª –≤ –ª–∏–Ω–∏—é**.

> –¢.–µ. `abs (uv.x - lineCoord) < (lineThickness * 0.5)`  
*–ü–æ—á–µ–º—É —Ç–æ–ª—â–∏–Ω—É –ª–∏–Ω–∏–∏ (`lineThickness`) –Ω—É–∂–Ω–æ —É–º–Ω–æ–∂–∏—Ç—å –Ω–∞ 0.5 (—Ç.–µ. –ø–æ–¥–µ–ª–∏—Ç—å –Ω–∞ 2)?*


```C++

void mainImage( out vec4 fragColor, in vec2 fragCoord )
{

    vec2 uv = fragCoord.xy / iResolution.xy;
    
    //–ë–µ–ª—ã–π —Ñ–æ–Ω
    vec3 finalColor = vec3(1.0);
    
    //–¶–≤–µ—Ç –ª–∏–Ω–∏–∏
    vec3 lineColor = vec3(1.0, 0.0, 0.0);
    
    //–¢–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–∏
    float lineThickness = 0.01;
    
    
    float lineCoord = 0.3;
    
    if (abs(uv.x - lineCoord) < (lineThickness * 0.5) )
    {
        finalColor = lineColor;
    }
    

    fragColor = vec4(finalColor, 1.0);
}
```
![11](./LR2/images/11.png)

> –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Ü–≤–µ—Ç –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≤–æ—Ç —Ç–∞–∫:  
`vec3(1.0);` –∏ —ç—Ç–æ –±–µ–ª—ã–π —Ü–≤–µ—Ç.  
–í–æ–ø—Ä–æ—Å –¥–ª—è —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è: *–ê –∫–∞–∫ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∑–∞–¥–∞—Ç—å —á–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç? –ê —Å–µ—Ä—ã–π?*

–ê –∫–∞–∫ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –µ—â–µ –æ–¥–Ω—É –ª–∏–Ω–∏—é —Ä—è–¥–æ–º (1)? –ê –µ—Å–ª–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é (2)? 

(1) –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ `else if` –¥–ª—è –∫–∞–∂–¥–æ–π –¥—Ä—É–≥–æ–π –ª–∏–Ω–∏–∏.  

(2) –ù—É–∂–Ω–æ —É –ø–∏–∫—Å–µ–ª—è –±—Ä–∞—Ç—å –Ω–µ `x`, –∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É `y` –∏ –≤—Å–µ —ç—Ç–∏ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Å –Ω–µ–π, –∏–≥–Ω–æ—Ä–∏—Ä—É—è `x`.

> –≠—Ç–∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç. 

–£ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å `else if` –µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫: –ø–æ —Å—É—Ç–∏, —ç—Ç–æ **–æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–æ–¥, –Ω–æ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏**. –¢.–µ. —ç—Ç–æ –º–æ–∂–Ω–æ —Å–≤–µ—Ä–Ω—É—Ç—å –≤ **—Ñ—É–Ω–∫—Ü–∏—é**.

–ß—Ç–æ–±—ã –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –ª–∏–Ω–∏—é –Ω–∞–º –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å:
1. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –ª–∏–Ω–∏–∏ `(x,y)`, —Ç.–µ. `vec2`;
2. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ–Ω—Ü–∞ –ª–∏–Ω–∏–∏ `(x,y)`, —Ç.–µ. `vec2`;
3. –¢–æ–ª—â–∏–Ω—É –ª–∏–Ω–∏–∏, —Ç.–µ. `float`;
4. –¶–≤–µ—Ç –ª–∏–Ω–∏–∏, —Ç.–µ. `vec3`.
 

##### –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∏—Å–æ–≤–∞–Ω–∏—é –ª–∏–Ω–∏–∏


–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ **—Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç —Ç–µ–∫—É—â–µ–π —Ç–æ—á–∫–∏ –¥–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø—Ä—è–º–æ–π**, –ø—Ä–æ—Ö–æ–¥—è—â–µ–π —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ –ª–∏–Ω–∏–∏. –ï—Å–ª–∏ —ç—Ç–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–Ω—å—à–µ –ø–æ–ª–æ–≤–∏–Ω—ã —Ç–æ–ª—â–∏–Ω—ã –ª–∏–Ω–∏–∏ - –º—ã –∑–∞–∫—Ä–∞—à–∏–≤–∞–µ–º –ø–∏–∫—Å–µ–ª—å.

–ö–æ–Ω—Ü–µ–ø—Ü–∏—è –≤–æ—Ç —Ç–∞–∫–∞—è: **—Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç**:
1. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–∏–∫—Å–µ–ª—è (`vec2 pixelCoords`)
2. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –≤–µ–∫—Ç–æ—Ä–∞ (`vec2 start`)
3. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ–Ω—Ü–∞ –≤–µ–∫—Ç–æ—Ä–∞ (`vec2 end`)
4. –¢–æ–ª—â–∏–Ω—É –ª–∏–Ω–∏–∏ (`float thickness`)
5. –¶–≤–µ—Ç –ª–∏–Ω–∏–∏ (`vec3 lineColor`)
6. –¶–≤–µ—Ç —Ñ–æ–Ω–∞ (`vec4 bgColor`)

**–§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç** **—á–µ—Ç—ã—Ä—ë—Ö–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –≤–µ–∫—Ç–æ—Ä** (*—Ü–≤–µ—Ç + –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å*) `vec4`.

–¢–µ–ø–µ—Ä—å –∏–¥—ë–º –ø–æ —Ç–∞–∫–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É:

1. –ü–æ–ª—É—á–∞–µ–º –≤–µ–∫—Ç–æ—Ä –ª–∏–Ω–∏–∏ (*–≤—ã—á–∏—Ç–∞–µ–º –∏–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∫–æ–Ω—Ü–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞—á–∞–ª–∞*)  
`vec2 lineVec = end - start;`
> –ú—ã –Ω–∞—Ö–æ–¥–∏–º –≤–µ–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –¥–ª–∏–Ω—É –Ω–∞—à–µ–π –ª–∏–Ω–∏–∏. –ï—Å–ª–∏ `start = (0,0)` –∏ `end = (3,4)`, —Ç–æ `lineVec = (3,4)`.

2. –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º 
```C++
float lineLength = length(lineVec);
vec2 lineDirection = lineVec / lineLength;
```
> –î–ª–∏–Ω–∞ –≤–µ–∫—Ç–æ—Ä–∞ `(3,4)` —Ä–∞–≤–Ω–∞ 5. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–ª–∏—Ç –∫–∞–∂–¥—É—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –Ω–∞ –¥–ª–∏–Ω—É:
`(3/5, 4/5) = (0.6, 0.8)`. –¢–µ–ø–µ—Ä—å —ç—Ç–æ **–µ–¥–∏–Ω–∏—á–Ω—ã–π –≤–µ–∫—Ç–æ—Ä** (–¥–ª–∏–Ω–∞ = 1), –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π —Ç–æ–ª—å–∫–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.

3. –ù–∞—Ö–æ–¥–∏–º –Ω–æ—Ä–º–∞–ª—å (–ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä)  
`vec2 normal = vec2(-lineDirection.y, lineDirection.x);`  

–î–ª—è –≤–µ–∫—Ç–æ—Ä–∞ `(0.6, 0.8)` –Ω–æ—Ä–º–∞–ª—å –±—É–¥–µ—Ç (`-0.8, 0.6)`.  

**–ü–æ—á–µ–º—É?** –ü–æ–≤–æ—Ä–æ—Ç –Ω–∞ 90 –≥—Ä–∞–¥—É—Å–æ–≤ –ø—Ä–æ—Ç–∏–≤ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–∏:
* x' = -y
* y' = x  

*–ü—Ä–æ–≤–µ—Ä–∫–∞:* —Å–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ `(0.6,0.8) ¬∑ (-0.8,0.6) = -0.48 + 0.48 = 0` - –≤–µ–∫—Ç–æ—Ä—ã –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω—ã!

4. –í—ã—á–∏—Å–ª–∏–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ø—Ä—è–º–æ–π  
`float dist = abs(dot(pixelCoords - start, normal));`

–†–∞–∑–±–µ—Ä–µ–º –ø–æ —á–∞—Å—Ç—è–º:

* `pixelCoords - start` - –≤–µ–∫—Ç–æ—Ä –æ—Ç –Ω–∞—á–∞–ª–∞ –ª–∏–Ω–∏–∏ –¥–æ —Ç–µ–∫—É—â–µ–π —Ç–æ—á–∫–∏

* `dot(..., normal)` - –ø—Ä–æ–µ–∫—Ü–∏—è —ç—Ç–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ –Ω–æ—Ä–º–∞–ª—å

* `abs()` - –±–µ—Ä–µ–º –º–æ–¥—É–ª—å, —Ç–∞–∫ –∫–∞–∫ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ

–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π —Å–º—ã—Å–ª: –°–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ `dot(A, B)` —Ä–∞–≤–Ω–æ `|A| √ó |B| √ó cos(Œ∏)`, –≥–¥–µ Œ∏ - —É–≥–æ–ª –º–µ–∂–¥—É –≤–µ–∫—Ç–æ—Ä–∞–º–∏. –¢–∞–∫ –∫–∞–∫ `|normal| = 1`, —Ç–æ `dot(A, normal) = |A| √ó cos(Œ∏)` - —ç—Ç–æ –∏ –µ—Å—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ø—Ä—è–º–æ–π!

5. –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Å —Ç–æ–ª—â–∏–Ω–æ–π –ª–∏–Ω–∏–∏
```C++
if (dist < thickness * 0.5)
    {
        bgColor = vec4(lineColor,1.0);
    }
```
> –ï—Å–ª–∏ –ø–æ–ø–∞–ª–∏ –≤ –ª–∏–Ω–∏—é, —Ç–æ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ü–≤–µ—Ç –ª–∏–Ω–∏–∏

6. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ü–≤–µ—Ç  
`return bgColor;`

> –ï—Å–ª–∏ –ø–∏–∫—Å–µ–ª—å –Ω–µ –ø–æ–ø–∞–ª –≤ –ª–∏–Ω–∏—é, —Ç–æ –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–æ—Ç –∂–µ —Ü–≤–µ—Ç —Ñ–æ–Ω–∞, —á—Ç–æ –∏ –ø—Ä–∏—à—ë–ª, –∞ –µ—Å–ª–∏ –ø–æ–ø–∞–ª, —Ç–æ –Ω–∞ 5-–æ–º —à–∞–≥–µ –ª–µ–∂–∏—Ç —É–∂–µ —Ü–≤–µ—Ç –ª–∏–Ω–∏–∏

7. –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ `mainImage`

```C++
    fragColor = drawLine (uv, vec2(0.3,0.0), vec2(0.3,1.0), 0.01, vec3(0.0), vec4(1.0));
    fragColor = drawLine (uv, vec2(0.0,0.3), vec2(1.0,0.3), 0.02, vec3(1.0,0.0,0.0), fragColor);
```

> –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç `bgColor`. –í –ø–µ—Ä–≤—ã–π —Ä–∞–∑ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø—Ä–æ—Å—Ç–æ –≤–µ–∫—Ç–æ—Ä —Å –±–µ–ª—ã–º —Ü–≤–µ—Ç–æ–º, –∞ –≤–æ –≤—Ç–æ—Ä–æ–π (–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ) —É–∂–µ —Å–∞–º `fragColor`. 

```C++

vec4 drawLine (vec2 pixelCoords, vec2 start, vec2 end, float thickness, vec3 lineColor, vec4 bgColor)
{
    //–≤—ã—á–∏—Å–ª—è–µ–º –≤–µ–∫—Ç–æ—Ä –∏ –Ω–∞—Ö–æ–¥–∏–º –µ–≥–æ –¥–ª–∏–Ω—É
    vec2 lineVec = end - start;
    float lineLength = length(lineVec);
    
    //–Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –≤–µ–∫—Ç–æ—Ä –∏ –Ω–∞—Ö–æ–¥–∏–º –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä (–Ω–æ—Ä–º–∞–ª—å)
    vec2 lineDirection = lineVec / lineLength;
    vec2 normal = vec2(-lineDirection.y, lineDirection.x);
    
    //–≤—ã—á–∏—Å–ª—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–∏–∫—Å–µ–ª—è –¥–æ –ø—Ä—è–º–æ–π
    float dist = abs(dot(pixelCoords - start, normal));
    
    if (dist < thickness * 0.5)
    {
        bgColor = vec4(lineColor,1.0);
    }

    return bgColor;
}

void mainImage( out vec4 fragColor, in vec2 fragCoord)
{
    // Normalized pixel coordinates (from 0 to 1)
    vec2 uv = fragCoord/iResolution.xy;

    fragColor = drawLine (uv, vec2(0.3,0.0), vec2(0.3,1.0), 0.01, vec3(0.0), vec4(1.0));
    fragColor = drawLine (uv, vec2(0.0,0.3), vec2(1.0,0.3), 0.02, vec3(1.0,0.0,0.0), fragColor);
    fragColor = drawLine (uv, vec2(0.0,0.2), vec2(1.0,0.8), 0.03, vec3(1.0,1.0,0.0), fragColor);
    fragColor = drawLine (uv, vec2(0.5,0.5), vec2(0.9,0.1), 0.04, vec3(1.0,0.6,0.1), fragColor);

}
```
![12](./LR2/images/12.png)

> –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –ª–∏–Ω–∏–∏ –Ω–∞–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞. *–û—Ç —á–µ–≥–æ —ç—Ç–æ –∑–∞–≤–∏—Å–∏—Ç?*

 **–ê –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –≤–æ—Ç —Ç–∞–∫–∏–µ –ª–∏–Ω–∏–∏?** *–ê —ç—Ç–æ –≤—ã —É–∑–Ω–∞–µ—Ç–µ –≤ —Å–ª–µ–¥—É—é—â–µ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ*üòè 

*–ü–æ–¥—Å–∫–∞–∑–∫–∞:*
```
vec3(1.0,uv.x,uv.y)
vec3(uv.y,uv.x,1.0)
vec3(uv.x,0.1,uv.y)
vec3(uv.y,uv.y,0.2)

vec4(uv.x,uv.y,uv.y,1.0)
```

![13](./LR2/images/13.png)

## –ó–∞–¥–∞–Ω–∏—è

### –ó–∞–¥–∞–Ω–∏–µ 1. –ü–æ–ª–æ—Å–∫–∏

–°–¥–µ–ª–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–æ—Å–æ–∫ —Ä–∞–∑–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞. –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ.

### –ó–∞–¥–∞–Ω–∏–µ 2. –õ–∏–Ω–∏–∏

–ù–∞—Ä–∏—Å—É–π—Ç–µ –ª–∏–Ω–∏–∏ —Ä–∞–∑–Ω–æ–π —Ç–æ–ª—â–∏–Ω—ã –∏ —Ü–≤–µ—Ç–∞.

### –ó–∞–¥–∞–Ω–∏–µ 3. –°–µ—Ç–∫–∞

–°–¥–µ–ª–∞–π—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—ã–µ –æ—Å–∏ —Å –∑–∞—Å–µ—á–∫–∞–º–∏ –∏/–∏–ª–∏ —Å–µ—Ç–∫–æ–π.


## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

1. –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–µ?

2. –ö–∞–∫ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ —ç–∫—Ä–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é?

3. –û–ø–∏—à–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–Ω—Ü–∏–ø –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ª–∏–Ω–∏–∏ –ø–æ –¥–≤—É–º —Ç–æ—á–∫–∞–º.
 
4. –ß—Ç–æ —Ç–∞–∫–æ–µ –Ω–æ—Ä–º–∞–ª—å –∫ –ø—Ä—è–º–æ–π –∏ –∫–∞–∫ –µ–µ –≤—ã—á–∏—Å–ª–∏—Ç—å?

5. –û–±—ä—è—Å–Ω–∏—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç —Ç–æ—á–∫–∏ –¥–æ –ø—Ä—è–º–æ–π.